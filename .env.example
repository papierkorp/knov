# KNOV Configuration Example
# Copy this file to .env and modify as needed

# ============================================================================
# Server Configuration
# ============================================================================

KNOV_SERVER_PORT=1324
KNOV_LOG_LEVEL=info  # debug, info, warning, error

# ============================================================================
# Path Configuration
# ============================================================================

KNOV_DATA_PATH=data
KNOV_THEMES_PATH=themes
KNOV_CONFIG_PATH=config

# ============================================================================
# Git Configuration
# ============================================================================

KNOV_GIT_REPO_URL=

# ============================================================================
# Search Configuration
# ============================================================================

KNOV_SEARCH_ENGINE=memory  # memory, sqlite
KNOV_CRONJOB_INTERVAL=5m
KNOV_SEARCH_INDEX_INTERVAL=15m

# ============================================================================
# Storage Configuration
# ============================================================================

# Storage providers: json, sqlite, postgres (postgres not yet implemented)
# IMPORTANT: Use different path conventions for different providers!
#   - JSON:   use directory paths WITHOUT .db extension (e.g., ./storage/metadata)
#   - SQLite: use file paths WITH .db extension (e.g., ./storage/metadata.db)

# config storage (user settings, dashboards)
KNOV_STORAGE_CONFIG_PROVIDER=json
KNOV_STORAGE_CONFIG_PATH=./storage/config

# metadata storage (file metadata, tags, collections)
KNOV_STORAGE_METADATA_PROVIDER=json
KNOV_STORAGE_METADATA_PATH=./storage/metadata

# cache storage (derived data, search index - can be safely deleted)
KNOV_STORAGE_CACHE_PROVIDER=json
KNOV_STORAGE_CACHE_PATH=./storage/cache

# Example for SQLite:
# KNOV_STORAGE_METADATA_PROVIDER=sqlite
# KNOV_STORAGE_METADATA_PATH=./storage/metadata.db
# KNOV_STORAGE_CACHE_PROVIDER=sqlite
# KNOV_STORAGE_CACHE_PATH=./storage/cache.db

# ============================================================================
# Storage Migration (one-time use)
# ============================================================================
# Uncomment and configure to migrate between storage providers
# After successful migration, remove these variables and restart

# KNOV_STORAGE_MIGRATE=true

# migrate config
# KNOV_STORAGE_CONFIG_OLD_PROVIDER=json
# KNOV_STORAGE_CONFIG_OLD_PATH=./storage/config

# migrate metadata
# KNOV_STORAGE_METADATA_OLD_PROVIDER=json
# KNOV_STORAGE_METADATA_OLD_PATH=./storage/metadata

# migrate cache (optional - rebuilds automatically)
# KNOV_STORAGE_CACHE_OLD_PROVIDER=json
# KNOV_STORAGE_CACHE_OLD_PATH=./storage/cache

# ============================================================================
# Migration Example: JSON to SQLite
# ============================================================================
# 1. Set migration flag and old storage info:
#    KNOV_STORAGE_MIGRATE=true
#    KNOV_STORAGE_METADATA_OLD_PROVIDER=json
#    KNOV_STORAGE_METADATA_OLD_PATH=./storage/metadata
#
# 2. Set new storage info:
#    KNOV_STORAGE_METADATA_PROVIDER=sqlite
#    KNOV_STORAGE_METADATA_PATH=./storage/metadata.db
#
# 3. Start KNOV - migration happens automatically
#
# 4. After successful migration, remove migration vars and restart
