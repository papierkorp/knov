basePath: /
definitions:
  dashboard.Dashboard:
    properties:
      global:
        type: boolean
      id:
        type: string
      layout:
        $ref: '#/definitions/dashboard.Layout'
      name:
        type: string
      widgets:
        items:
          $ref: '#/definitions/dashboard.Widget'
        type: array
    type: object
  dashboard.FileContentConfig:
    properties:
      filePath:
        type: string
    type: object
  dashboard.FilterConfig:
    properties:
      criteria:
        items:
          $ref: '#/definitions/files.FilterCriteria'
        type: array
      display:
        description: list, cards, dropdown
        type: string
      limit:
        type: integer
      logic:
        type: string
    type: object
  dashboard.Layout:
    enum:
    - oneColumn
    - twoColumns
    - threeColumns
    - fourColumns
    - custom
    type: string
    x-enum-varnames:
    - OneColumn
    - TwoColumns
    - ThreeColumns
    - FourColumns
    - Custom
  dashboard.StaticConfig:
    properties:
      content:
        type: string
      format:
        description: html, markdown, text
        type: string
    type: object
  dashboard.Widget:
    properties:
      config:
        $ref: '#/definitions/dashboard.WidgetConfig'
      id:
        type: string
      position:
        $ref: '#/definitions/dashboard.WidgetPosition'
      title:
        type: string
      type:
        $ref: '#/definitions/dashboard.WidgetType'
    type: object
  dashboard.WidgetConfig:
    properties:
      fileContent:
        $ref: '#/definitions/dashboard.FileContentConfig'
      filter:
        $ref: '#/definitions/dashboard.FilterConfig'
      static:
        $ref: '#/definitions/dashboard.StaticConfig'
    type: object
  dashboard.WidgetPosition:
    properties:
      x:
        type: integer
      "y":
        type: integer
    type: object
  dashboard.WidgetType:
    enum:
    - filter
    - filterForm
    - fileContent
    - static
    - tags
    - collections
    - folders
    - para_projects
    - para_areas
    - para_resources
    - para_archive
    type: string
    x-enum-varnames:
    - WidgetTypeFilter
    - WidgetTypeFilterForm
    - WidgetTypeFileContent
    - WidgetTypeStatic
    - WidgetTypeTags
    - WidgetTypeCollections
    - WidgetTypeFolders
    - WidgetTypeParaProjects
    - WidgetTypeParaAreas
    - WidgetTypeParaResources
    - WidgetTypeParaArchive
  files.File:
    properties:
      metadata:
        $ref: '#/definitions/files.Metadata'
      name:
        type: string
      path:
        type: string
    type: object
  files.Filetype:
    enum:
    - todo
    - fleeting
    - literature
    - moc
    - permanent
    type: string
    x-enum-varnames:
    - FileTypeTodo
    - FileTypeFleeting
    - FileTypeLiterature
    - FileTypeMOC
    - FileTypePermanent
  files.FilterCriteria:
    properties:
      action:
        type: string
      metadata:
        type: string
      operator:
        type: string
      value:
        type: string
    type: object
  files.Metadata:
    properties:
      ancestor:
        description: auto
        items:
          type: string
        type: array
      boards:
        description: auto
        items:
          type: string
        type: array
      collection:
        description: auto / manual possible
        type: string
      createdAt:
        description: auto
        type: string
      folders:
        description: auto
        items:
          type: string
        type: array
      kids:
        description: auto
        items:
          type: string
        type: array
      lastEdited:
        description: auto
        type: string
      linksToHere:
        description: auto
        items:
          type: string
        type: array
      name:
        description: manual filename
        type: string
      para:
        allOf:
        - $ref: '#/definitions/files.PARA'
        description: manual
      parents:
        description: manual
        items:
          type: string
        type: array
      path:
        description: auto
        type: string
      priority:
        allOf:
        - $ref: '#/definitions/files.Priority'
        description: manual
      size:
        description: auto
        type: integer
      status:
        allOf:
        - $ref: '#/definitions/files.Status'
        description: manual
      tags:
        description: manual
        items:
          type: string
        type: array
      targetDate:
        description: auto
        type: string
      type:
        allOf:
        - $ref: '#/definitions/files.Filetype'
        description: manual - with add new
      usedLinks:
        description: auto
        items:
          type: string
        type: array
    type: object
  files.PARA:
    properties:
      archive:
        description: Inactive items
        items:
          type: string
        type: array
      areas:
        description: Ongoing responsibilities
        items:
          type: string
        type: array
      projects:
        description: Active projects with deadlines
        items:
          type: string
        type: array
      resources:
        description: Future reference materials
        items:
          type: string
        type: array
    type: object
  files.Priority:
    enum:
    - low
    - medium
    - high
    type: string
    x-enum-varnames:
    - PriorityLow
    - PriorityMedium
    - PriorityHigh
  files.Status:
    enum:
    - draft
    - published
    - archived
    type: string
    x-enum-varnames:
    - StatusDraft
    - StatusPublished
    - StatusArchived
host: localhost:1324
info:
  contact: {}
  description: KNOV API \n http://localhost:1324
  title: Knov API
  version: "1.0"
paths:
  /api/components/editor:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get file editor
      tags:
      - components
  /api/components/table:
    get:
      description: Returns paginated, sortable, searchable table HTML fragment
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 25
        description: Items per page
        in: query
        name: size
        type: integer
      - default: -1
        description: Column index to sort by
        in: query
        name: sort
        type: integer
      - default: asc
        description: Sort order (asc/desc)
        in: query
        name: order
        type: string
      - description: Search query
        in: query
        name: search
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: table html fragment
          schema:
            type: string
        "400":
          description: invalid parameters
          schema:
            type: string
        "500":
          description: failed to process table
          schema:
            type: string
      summary: Get paginated table
      tags:
      - components
  /api/config:
    get:
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get current configuration
      tags:
      - config
  /api/config/colorscheme:
    post:
      consumes:
      - application/x-www-form-urlencoded
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Set color scheme
      tags:
      - config
  /api/config/colorschemes:
    get:
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get available color schemes
      tags:
      - config
  /api/config/customcss:
    get:
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get custom CSS
      tags:
      - config
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: CSS content
        in: formData
        name: css
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: css saved
          schema:
            type: string
      summary: Save custom CSS for current user
      tags:
      - config
  /api/config/darkmode:
    get:
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get dark mode setting
      tags:
      - config
    post:
      consumes:
      - application/x-www-form-urlencoded
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Set dark mode
      tags:
      - config
  /api/config/darkmode/status:
    get:
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get dark mode status as boolean
      tags:
      - config
  /api/config/datapath:
    get:
      produces:
      - text/html
      responses: {}
      summary: Get current data path as input field
      tags:
      - config
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: updates data path in .env file (requires restart)
      parameters:
      - description: data path
        in: formData
        name: dataPath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: saved
          schema:
            type: string
      summary: Update data path
      tags:
      - config
  /api/config/fileview:
    post:
      consumes:
      - application/x-www-form-urlencoded
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Set file view
      tags:
      - config
  /api/config/fileviews:
    get:
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get available file views for current theme
      tags:
      - config
  /api/config/language:
    post:
      consumes:
      - application/x-www-form-urlencoded
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Set language
      tags:
      - config
  /api/config/languages:
    get:
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get available languages
      tags:
      - config
  /api/config/repository:
    get:
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get git repository URL
      tags:
      - config
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: updates git repository url in .env file (requires restart)
      parameters:
      - description: repository url
        in: formData
        name: repositoryUrl
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: saved
          schema:
            type: string
      summary: Update git repository URL
      tags:
      - config
  /api/dashboards:
    get:
      description: Get list of all dashboards for current user
      parameters:
      - description: Show shortened dashboard names (3 chars max)
        in: query
        name: short
        type: boolean
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/dashboard.Dashboard'
            type: array
      summary: Get all dashboards
      tags:
      - dashboards
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Create a new dashboard with optional widgets
      parameters:
      - description: Dashboard name
        in: formData
        name: name
        required: true
        type: string
      - description: Dashboard layout (oneColumn, twoColumns, threeColumns, fourColumns)
        in: formData
        name: layout
        required: true
        type: string
      - description: Global dashboard (true/false)
        in: formData
        name: global
        type: string
      - description: Widget type (filter, filterForm, fileContent, static, tags, collections,
          folders)
        in: formData
        name: widgets[0][type]
        type: string
      - description: Widget title
        in: formData
        name: widgets[0][title]
        type: string
      - description: Widget X position
        in: formData
        name: widgets[0][position][x]
        type: integer
      - description: Widget Y position
        in: formData
        name: widgets[0][position][y]
        type: integer
      - description: Widget configuration JSON
        in: formData
        name: widgets[0][config]
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: dashboard created
          schema:
            type: string
      summary: Create new dashboard
      tags:
      - dashboards
  /api/dashboards/{id}:
    delete:
      description: Delete dashboard by ID
      parameters:
      - description: Dashboard ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: dashboard deleted
          schema:
            type: string
      summary: Delete dashboard
      tags:
      - dashboards
    get:
      description: Get dashboard by ID
      parameters:
      - description: Dashboard ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dashboard.Dashboard'
      summary: Get specific dashboard
      tags:
      - dashboards
    patch:
      consumes:
      - application/x-www-form-urlencoded
      description: Update existing dashboard
      parameters:
      - description: Dashboard ID
        in: path
        name: id
        required: true
        type: string
      - description: Dashboard name
        in: formData
        name: name
        type: string
      - description: Dashboard layout (oneColumn, twoColumns, threeColumns, fourColumns)
        in: formData
        name: layout
        type: string
      - description: Global dashboard
        in: formData
        name: global
        type: string
      - description: Widget type
        in: formData
        name: widgets[0][type]
        type: string
      - description: Widget title
        in: formData
        name: widgets[0][title]
        type: string
      - description: Widget X position
        in: formData
        name: widgets[0][position][x]
        type: integer
      - description: Widget Y position
        in: formData
        name: widgets[0][position][y]
        type: integer
      - description: Widget configuration JSON
        in: formData
        name: widgets[0][config]
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dashboard.Dashboard'
      summary: Update dashboard
      tags:
      - dashboards
  /api/dashboards/{id}/rename:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: dashboard id
        in: path
        name: id
        required: true
        type: string
      - description: new dashboard name
        in: formData
        name: name
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: dashboard renamed
          schema:
            type: string
      summary: Rename dashboard
      tags:
      - dashboards
  /api/dashboards/filter-criteria:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Add new filter criteria row for filter widget configuration
      parameters:
      - description: Widget index
        in: formData
        name: widget_index
        required: true
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: filter criteria row html
          schema:
            type: string
      summary: Add filter criteria row
      tags:
      - dashboards
  /api/dashboards/filter-value-input:
    get:
      description: Returns appropriate input HTML with datalist for filter value based
        on selected metadata field
      parameters:
      - description: Widget index
        in: formData
        name: widget_index
        required: true
        type: string
      - description: Criteria index
        in: formData
        name: criteria_index
        required: true
        type: string
      - description: Metadata field type
        in: formData
        name: widgets[X][config][criteria][Y][metadata]
        required: true
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: HTML input with datalist
          schema:
            type: string
      summary: Get filter value input HTML based on metadata field
      tags:
      - dashboards
  /api/dashboards/filterform-row:
    post:
      description: Returns HTML for a new filter row to be added to filterForm widget
      produces:
      - text/html
      responses:
        "200":
          description: HTML filter row
          schema:
            type: string
      summary: Get a new filter row for filterForm widget
      tags:
      - dashboards
  /api/dashboards/filterform-value-input:
    get:
      description: Returns appropriate input HTML with datalist for filterForm value
        based on selected metadata field
      parameters:
      - description: Row index
        in: formData
        name: row_index
        required: true
        type: string
      - description: Metadata field type
        in: formData
        name: metadata[]
        required: true
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: HTML input with datalist
          schema:
            type: string
      summary: Get filter value input for filterForm widget
      tags:
      - dashboards
  /api/dashboards/form:
    get:
      description: Get dashboard form for create or edit
      parameters:
      - description: Dashboard ID for edit mode
        in: query
        name: id
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: dashboard form html
          schema:
            type: string
      summary: Get dashboard form
      tags:
      - dashboards
  /api/dashboards/widget-config:
    get:
      consumes:
      - application/x-www-form-urlencoded
      description: Get configuration form for specific widget type
      parameters:
      - description: Widget index
        in: query
        name: index
        required: true
        type: string
      - description: Widget type
        in: query
        name: widgets[X][type]
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: widget config html
          schema:
            type: string
      summary: Get widget configuration form
      tags:
      - dashboards
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Get configuration form for specific widget type
      parameters:
      - description: Widget index
        in: query
        name: index
        required: true
        type: string
      - description: Widget type
        in: query
        name: widgets[X][type]
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: widget config html
          schema:
            type: string
      summary: Get widget configuration form
      tags:
      - dashboards
  /api/dashboards/widget-form:
    post:
      description: Get empty widget form for adding new widget
      produces:
      - text/html
      responses:
        "200":
          description: widget form html
          schema:
            type: string
      summary: Get widget form
      tags:
      - dashboards
  /api/dashboards/widget/{widgetId}:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Render a specific widget by ID from a dashboard
      parameters:
      - description: Dashboard ID
        in: formData
        name: dashboardId
        required: true
        type: string
      - description: Widget ID
        in: path
        name: widgetId
        required: true
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: rendered widget html
          schema:
            type: string
        "400":
          description: missing parameters
          schema:
            type: string
        "404":
          description: widget not found
          schema:
            type: string
        "500":
          description: failed to render widget
          schema:
            type: string
      summary: Render dashboard widget
      tags:
      - widgets
  /api/files/browse:
    get:
      parameters:
      - description: Metadata field name
        in: query
        name: metadata
        required: true
        type: string
      - description: Metadata field value
        in: query
        name: value
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/files.File'
            type: array
      summary: Browse files by single metadata field
      tags:
      - files
  /api/files/content/{filepath}:
    get:
      parameters:
      - description: File path
        in: path
        name: filepath
        required: true
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get file content as html
      tags:
      - files
  /api/files/create:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: File content
        in: formData
        name: content
        required: true
        type: string
      produces:
      - text/html
      responses: {}
      summary: Create new file
      tags:
      - files
  /api/files/filter:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - collectionFormat: csv
        description: Metadata fields to filter on
        in: formData
        items:
          type: string
        name: metadata[]
        type: array
      - collectionFormat: csv
        description: Filter operators (equals, contains, greater, less, in)
        in: formData
        items:
          type: string
        name: operator[]
        type: array
      - collectionFormat: csv
        description: Filter values
        in: formData
        items:
          type: string
        name: value[]
        type: array
      - collectionFormat: csv
        description: Filter actions (include, exclude)
        in: formData
        items:
          type: string
        name: action[]
        type: array
      - default: and
        description: Logic operator for combining criteria (and, or)
        in: formData
        name: logic
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/files.File'
            type: array
      summary: Filter files by metadata
      tags:
      - files
  /api/files/form:
    get:
      parameters:
      - description: File path (optional for new files)
        in: query
        name: filepath
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get file form HTML
      tags:
      - files
  /api/files/header:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get file header with link and breadcrumb
      tags:
      - files
  /api/files/list:
    get:
      parameters:
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get all files
      tags:
      - files
  /api/files/markdown-form:
    get:
      description: Returns a markdown editor form for creating or editing files
      parameters:
      - description: File path (optional for new files)
        in: query
        name: filepath
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get markdown editor form HTML
      tags:
      - files
  /api/files/metadata-form:
    get:
      parameters:
      - description: File path (optional for new files)
        in: query
        name: filepath
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get metadata form HTML
      tags:
      - files
  /api/files/metadata/form:
    get:
      parameters:
      - description: File path (optional for new files)
        in: query
        name: filepath
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get metadata form HTML for file editing
      tags:
      - files
  /api/files/raw:
    get:
      description: Returns unprocessed file content for editing
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/plain
      responses:
        "200":
          description: raw content
          schema:
            type: string
      summary: Get raw file content
      tags:
      - files
  /api/files/save/{filepath}:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: path
        name: filepath
        required: true
        type: string
      - description: File content
        in: formData
        name: content
        required: true
        type: string
      produces:
      - text/html
      responses: {}
      summary: Save file content
      tags:
      - files
  /api/git/latestchanges:
    get:
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get recently changed files
      tags:
      - git
  /api/health:
    get:
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Health check
      tags:
      - health
  /api/links/ancestors:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get ancestor links for a file
      tags:
      - links
  /api/links/kids:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get kids links for a file
      tags:
      - links
  /api/links/linkstohere:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get links to here for a file
      tags:
      - links
  /api/links/parents:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get parent links for a file
      tags:
      - links
  /api/links/used:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get used links for a file
      tags:
      - links
  /api/metadata:
    get:
      description: Get metadata for a file by providing filepath as query parameter
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/files.Metadata'
        "400":
          description: missing filepath parameter
          schema:
            type: string
        "404":
          description: metadata not found
          schema:
            type: string
        "500":
          description: failed to get metadata
          schema:
            type: string
      summary: Get metadata for a single file
      tags:
      - metadata
    post:
      consumes:
      - application/json
      description: Set metadata for a file using JSON payload
      parameters:
      - description: Metadata object
        in: body
        name: metadata
        required: true
        schema:
          $ref: '#/definitions/files.Metadata'
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: metadata saved
          schema:
            type: string
        "400":
          description: invalid json or missing path
          schema:
            type: string
        "500":
          description: failed to save metadata
          schema:
            type: string
      summary: Set metadata for a single file
      tags:
      - metadata
  /api/metadata/collection:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file collection
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Collection name
        in: formData
        name: collection
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file collection
      tags:
      - metadata
  /api/metadata/collections:
    get:
      description: Get all collections with counts, or collection for a specific file
        if filepath is provided
      parameters:
      - description: File path (optional - if provided, returns collection for that
          specific file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: integer
            type: object
      summary: Get all collections or collection for a specific file
      tags:
      - metadata
  /api/metadata/createdat:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file creation date
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Creation date (YYYY-MM-DD HH:MM:SS)
        in: formData
        name: createdat
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file creation date
      tags:
      - metadata
  /api/metadata/export:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Export all metadata as JSON or CSV file
      parameters:
      - default: json
        description: Export format (json or csv)
        in: formData
        name: format
        type: string
      produces:
      - application/json
      - text/csv
      responses:
        "200":
          description: exported metadata file
          schema:
            type: file
        "500":
          description: failed to export metadata
          schema:
            type: string
      summary: Export all metadata
      tags:
      - metadata
  /api/metadata/file/collection:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get collection for a specific file
      tags:
      - metadata
  /api/metadata/file/folders:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            items:
              type: string
            type: array
      summary: Get folders for a specific file
      tags:
      - metadata
  /api/metadata/file/tags:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            items:
              type: string
            type: array
      summary: Get tags for a specific file
      tags:
      - metadata
  /api/metadata/filetype:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file type
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: File type (fleeting, literature, permanent, moc, todo)
        in: formData
        name: filetype
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file type
      tags:
      - metadata
  /api/metadata/filetypes:
    get:
      parameters:
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            items:
              type: string
            type: array
      summary: Get all available filetypes
      tags:
      - metadata
  /api/metadata/folders:
    get:
      description: Get all folders with counts, or folders for a specific file if
        filepath is provided
      parameters:
      - description: File path (optional - if provided, returns folders for that specific
          file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: integer
            type: object
      summary: Get all folders or folders for a specific file
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated folder list
        in: formData
        name: folders
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file folders
      tags:
      - metadata
  /api/metadata/lastedited:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file last edited date
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Last edited date (YYYY-MM-DD HH:MM:SS)
        in: formData
        name: lastedited
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file last edited date
      tags:
      - metadata
  /api/metadata/name:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file name
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: New file name
        in: formData
        name: name
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file name
      tags:
      - metadata
  /api/metadata/para/archive:
    get:
      description: Get all PARA archive with counts, or archive for a specific file
        if filepath is provided
      parameters:
      - description: File path (optional - if provided, returns archive for that specific
          file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for datalist)
        enum:
        - options
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get all PARA archive or archive for a specific file
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated archive list
        in: formData
        name: archive
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set PARA archive
      tags:
      - metadata
  /api/metadata/para/areas:
    get:
      description: Get all PARA areas with counts, or areas for a specific file if
        filepath is provided
      parameters:
      - description: File path (optional - if provided, returns areas for that specific
          file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for datalist)
        enum:
        - options
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get all PARA areas or areas for a specific file
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated area list
        in: formData
        name: areas
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set PARA areas
      tags:
      - metadata
  /api/metadata/para/projects:
    get:
      description: Get all PARA projects with counts, or projects for a specific file
        if filepath is provided
      parameters:
      - description: File path (optional - if provided, returns projects for that
          specific file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for datalist)
        enum:
        - options
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get all PARA projects or projects for a specific file
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated project list
        in: formData
        name: projects
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set PARA projects
      tags:
      - metadata
  /api/metadata/para/resources:
    get:
      description: Get all PARA resources with counts, or resources for a specific
        file if filepath is provided
      parameters:
      - description: File path (optional - if provided, returns resources for that
          specific file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for datalist)
        enum:
        - options
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get all PARA resources or resources for a specific file
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated resource list
        in: formData
        name: resources
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set PARA resources
      tags:
      - metadata
  /api/metadata/parents:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated parent file paths
        in: formData
        name: parents
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file parents
      tags:
      - metadata
  /api/metadata/path:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file path
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: Current file path
        in: formData
        name: filepath
        required: true
        type: string
      - description: New file path
        in: formData
        name: newpath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file path
      tags:
      - metadata
  /api/metadata/priorities:
    get:
      parameters:
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            items:
              type: string
            type: array
      summary: Get all available priorities
      tags:
      - metadata
  /api/metadata/priority:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file priority
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Priority (low, medium, high)
        in: formData
        name: priority
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file priority
      tags:
      - metadata
  /api/metadata/rebuild:
    post:
      description: Creates metadata for all files that don't have metadata yet
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: metadata initialized
          schema:
            type: string
        "500":
          description: failed to initialize metadata
          schema:
            type: string
      summary: Initialize/Rebuild metadata for all files
      tags:
      - metadata
  /api/metadata/status:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Status (draft, published, archived)
        in: formData
        name: status
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file status
      tags:
      - metadata
  /api/metadata/statuses:
    get:
      parameters:
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            items:
              type: string
            type: array
      summary: Get all available statuses
      tags:
      - metadata
  /api/metadata/tags:
    get:
      description: Get all tags with counts, or tags for a specific file if filepath
        is provided
      parameters:
      - description: File path (optional - if provided, returns tags for that specific
          file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: integer
            type: object
      summary: Get all tags or tags for a specific file
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated tag list
        in: formData
        name: tags
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file tags
      tags:
      - metadata
  /api/search:
    get:
      parameters:
      - description: Search query
        in: query
        name: q
        required: true
        type: string
      - description: 'Output format: dropdown, list, cards, json'
        enum:
        - dropdown
        - list
        - cards
        - json
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Search files
      tags:
      - search
  /api/system/restart:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Restarts the application (requires process manager like systemd
        or docker)
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: restarting
          schema:
            type: string
      summary: Restart application
      tags:
      - system
  /api/testdata/clean:
    post:
      description: Removes all test data files and metadata
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: '{"status":"ok","message":"test data cleaned"}'
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      summary: Clean test data
      tags:
      - testdata
  /api/testdata/setup:
    post:
      description: Creates test files, git operations, and metadata for testing
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: '{"status":"ok","message":"test data setup completed"}'
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      summary: Setup test data
      tags:
      - testdata
  /api/themes/:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Set new theme via form parameter
      parameters:
      - description: Theme name to set
        in: formData
        name: theme
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "303":
          description: Redirect to settings page
      summary: Set theme
      tags:
      - themes
  /api/themes/{themeName}/settings:
    get:
      description: Get all settings for a specific theme
      parameters:
      - description: Theme name
        in: path
        name: themeName
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: Theme settings object
          schema:
            type: object
      summary: Get theme settings
      tags:
      - themes
  /api/themes/{themeName}/settings/{settingKey}:
    put:
      consumes:
      - application/x-www-form-urlencoded
      description: Update a specific setting for a theme
      parameters:
      - description: Theme name
        in: path
        name: themeName
        required: true
        type: string
      - description: Setting key to update
        in: path
        name: settingKey
        required: true
        type: string
      - description: Setting value
        in: formData
        name: value
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: Setting updated successfully
      summary: Update theme setting
      tags:
      - themes
  /api/themes/getAllThemes:
    get:
      description: Get current theme and available themes
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: '{"current":"themename","available":["theme1","theme2"]}'
          schema:
            type: string
      summary: Get themes
      tags:
      - themes
swagger: "2.0"
