basePath: /
definitions:
  dashboard.Dashboard:
    properties:
      id:
        type: string
      layout:
        $ref: '#/definitions/dashboard.Layout'
      name:
        type: string
      widgets:
        items:
          $ref: '#/definitions/dashboard.Widget'
        type: array
    type: object
  dashboard.FileContentConfig:
    properties:
      filePath:
        type: string
    type: object
  dashboard.FilterConfig:
    properties:
      criteria:
        items:
          $ref: '#/definitions/filter.Criteria'
        type: array
      display:
        description: list, cards, dropdown, content
        type: string
      limit:
        type: integer
      logic:
        type: string
    type: object
  dashboard.Layout:
    enum:
    - oneColumn
    - twoColumns
    - threeColumns
    - fourColumns
    - custom
    type: string
    x-enum-varnames:
    - OneColumn
    - TwoColumns
    - ThreeColumns
    - FourColumns
    - Custom
  dashboard.StaticConfig:
    properties:
      content:
        type: string
      format:
        description: html, markdown, text
        type: string
    type: object
  dashboard.Widget:
    properties:
      config:
        $ref: '#/definitions/dashboard.WidgetConfig'
      id:
        type: string
      position:
        $ref: '#/definitions/dashboard.WidgetPosition'
      title:
        type: string
      type:
        $ref: '#/definitions/dashboard.WidgetType'
    type: object
  dashboard.WidgetConfig:
    properties:
      fileContent:
        $ref: '#/definitions/dashboard.FileContentConfig'
      filter:
        $ref: '#/definitions/dashboard.FilterConfig'
      static:
        $ref: '#/definitions/dashboard.StaticConfig'
    type: object
  dashboard.WidgetPosition:
    properties:
      x:
        type: integer
      "y":
        type: integer
    type: object
  dashboard.WidgetType:
    enum:
    - filter
    - filterForm
    - fileContent
    - static
    - tags
    - collections
    - folders
    - para_projects
    - para_areas
    - para_resources
    - para_archive
    type: string
    x-enum-varnames:
    - WidgetTypeFilter
    - WidgetTypeFilterForm
    - WidgetTypeFileContent
    - WidgetTypeStatic
    - WidgetTypeTags
    - WidgetTypeCollections
    - WidgetTypeFolders
    - WidgetTypeParaProjects
    - WidgetTypeParaAreas
    - WidgetTypeParaResources
    - WidgetTypeParaArchive
  files.CollectionCount:
    additionalProperties:
      type: integer
    type: object
  files.File:
    properties:
      metadata:
        $ref: '#/definitions/files.Metadata'
      name:
        type: string
      path:
        type: string
    type: object
  files.Filetype:
    enum:
    - todo
    - fleeting
    - literature
    - moc
    - permanent
    - filter
    - journaling
    - image
    - video
    - pdf
    - text
    type: string
    x-enum-comments:
      FileTypeMOC: maps of content - indexes to link related notes
    x-enum-descriptions:
    - ""
    - ""
    - ""
    - maps of content - indexes to link related notes
    - ""
    - ""
    - ""
    - ""
    - ""
    - ""
    - ""
    x-enum-varnames:
    - FileTypeTodo
    - FileTypeFleeting
    - FileTypeLiterature
    - FileTypeMOC
    - FileTypePermanent
    - FileTypeFilter
    - FileTypeJournaling
    - FileTypeImage
    - FileTypeVideo
    - FileTypePDF
    - FileTypeText
  files.FiletypeCount:
    additionalProperties:
      type: integer
    type: object
  files.FolderCount:
    additionalProperties:
      type: integer
    type: object
  files.Metadata:
    properties:
      ancestor:
        description: auto
        items:
          type: string
        type: array
      boards:
        description: auto
        items:
          type: string
        type: array
      collection:
        description: auto / manual possible
        type: string
      createdAt:
        description: auto
        type: string
      folder:
        description: auto
        type: string
      folders:
        description: auto
        items:
          type: string
        type: array
      kids:
        description: auto
        items:
          type: string
        type: array
      lastEdited:
        description: auto
        type: string
      linksToHere:
        description: auto
        items:
          type: string
        type: array
      name:
        description: manual filename
        type: string
      para:
        allOf:
        - $ref: '#/definitions/files.PARA'
        description: manual
      parents:
        description: manual
        items:
          type: string
        type: array
      path:
        description: auto
        type: string
      priority:
        allOf:
        - $ref: '#/definitions/files.Priority'
        description: manual
      size:
        description: auto
        type: integer
      status:
        allOf:
        - $ref: '#/definitions/files.Status'
        description: manual
      tags:
        description: manual
        items:
          type: string
        type: array
      targetDate:
        description: manual
        type: string
      title:
        description: auto
        type: string
      type:
        allOf:
        - $ref: '#/definitions/files.Filetype'
        description: manual - with add new
      usedLinks:
        description: auto
        items:
          type: string
        type: array
    type: object
  files.PARA:
    properties:
      archive:
        description: Inactive items
        items:
          type: string
        type: array
      areas:
        description: Ongoing responsibilities
        items:
          type: string
        type: array
      projects:
        description: Active projects with deadlines
        items:
          type: string
        type: array
      resources:
        description: Future reference materials
        items:
          type: string
        type: array
    type: object
  files.PARAArchiveCount:
    additionalProperties:
      type: integer
    type: object
  files.PARAAreaCount:
    additionalProperties:
      type: integer
    type: object
  files.PARAProjectCount:
    additionalProperties:
      type: integer
    type: object
  files.PARAResourceCount:
    additionalProperties:
      type: integer
    type: object
  files.Priority:
    enum:
    - low
    - medium
    - high
    type: string
    x-enum-varnames:
    - PriorityLow
    - PriorityMedium
    - PriorityHigh
  files.PriorityCount:
    additionalProperties:
      type: integer
    type: object
  files.Status:
    enum:
    - draft
    - published
    - archived
    type: string
    x-enum-varnames:
    - StatusDraft
    - StatusPublished
    - StatusArchived
  files.StatusCount:
    additionalProperties:
      type: integer
    type: object
  files.TagCount:
    additionalProperties:
      type: integer
    type: object
  filter.Config:
    properties:
      criteria:
        items:
          $ref: '#/definitions/filter.Criteria'
        type: array
      display:
        description: list, cards, dropdown, content
        type: string
      limit:
        type: integer
      logic:
        type: string
    type: object
  filter.Criteria:
    properties:
      action:
        type: string
      metadata:
        type: string
      operator:
        type: string
      value:
        type: string
    type: object
  filter.Result:
    properties:
      files:
        items:
          $ref: '#/definitions/files.File'
        type: array
      filter_count:
        type: integer
      logic:
        type: string
      total:
        type: integer
    type: object
  testdata.FilterTestResult:
    properties:
      actual_count:
        type: integer
      actual_files:
        items:
          type: string
        type: array
      config:
        $ref: '#/definitions/filter.Config'
      config_name:
        type: string
      description:
        type: string
      error:
        type: string
      expected_count:
        type: integer
      expected_files:
        items:
          type: string
        type: array
      success:
        type: boolean
    type: object
  testdata.FilterTestResults:
    properties:
      failed_tests:
        type: integer
      log_file:
        type: string
      passed_tests:
        type: integer
      results:
        items:
          $ref: '#/definitions/testdata.FilterTestResult'
        type: array
      success:
        type: boolean
      total_tests:
        type: integer
    type: object
host: localhost:1324
info:
  contact: {}
  description: KNOV API \n http://localhost:1324
  title: Knov API
  version: "1.0"
paths:
  /api/components/table:
    get:
      description: Returns paginated, sortable, searchable table HTML fragment
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 25
        description: Items per page
        in: query
        name: size
        type: integer
      - default: -1
        description: Column index to sort by
        in: query
        name: sort
        type: integer
      - default: asc
        description: Sort order (asc/desc)
        in: query
        name: order
        type: string
      - description: Search query
        in: query
        name: search
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: table html fragment
          schema:
            type: string
        "400":
          description: invalid parameters
          schema:
            type: string
        "500":
          description: failed to process table
          schema:
            type: string
      summary: Get paginated table
      tags:
      - components
  /api/config:
    get:
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get current configuration
      tags:
      - config
  /api/config/datapath:
    get:
      produces:
      - text/html
      responses: {}
      summary: Get current data path as input field
      tags:
      - config
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: updates data path in .env file (requires restart)
      parameters:
      - description: data path
        in: formData
        name: dataPath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: saved
          schema:
            type: string
      summary: Update data path
      tags:
      - config
  /api/config/language:
    post:
      consumes:
      - application/x-www-form-urlencoded
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Set language
      tags:
      - config
  /api/config/languages:
    get:
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get available languages
      tags:
      - config
  /api/config/media/border-style:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: 'Border style: none, simple, rounded, shadow'
        in: formData
        name: borderStyle
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Update preview border style
      tags:
      - config
  /api/config/media/click-to-enlarge:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: Whether previews are clickable
        in: formData
        name: clickToEnlarge
        required: true
        type: boolean
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Update click to enlarge setting
      tags:
      - config
  /api/config/media/default-preview-size:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: Default preview size in pixels
        in: formData
        name: defaultPreviewSize
        required: true
        type: integer
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Update default preview size
      tags:
      - config
  /api/config/media/display-mode:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: 'Display mode: left, center, right, inline'
        in: formData
        name: displayMode
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Update preview display mode
      tags:
      - config
  /api/config/media/enable-previews:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: Whether previews are enabled
        in: formData
        name: enablePreviews
        required: true
        type: boolean
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Update preview enabled setting
      tags:
      - config
  /api/config/media/mime-types:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: Comma-separated list of allowed MIME types
        in: formData
        name: allowedMimeTypes
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Update allowed MIME types
      tags:
      - config
  /api/config/media/orphaned-age:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: Number of days before orphaned files can be cleaned up
        in: formData
        name: orphanedMediaAgeDays
        required: true
        type: integer
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Update orphaned media age
      tags:
      - config
  /api/config/media/orphaned-behavior:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: Orphaned media behavior (keep or manual)
        in: formData
        name: orphanedMediaBehavior
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Update orphaned media behavior
      tags:
      - config
  /api/config/media/show-caption:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: Whether to show captions
        in: formData
        name: showCaption
        required: true
        type: boolean
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Update show caption setting
      tags:
      - config
  /api/config/media/upload-size:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: Maximum upload size in MB
        in: formData
        name: maxUploadSizeMB
        required: true
        type: integer
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Update media upload size limit
      tags:
      - config
  /api/config/repository:
    get:
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get git repository URL
      tags:
      - config
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: updates git repository url in .env file (requires restart)
      parameters:
      - description: repository url
        in: formData
        name: repositoryUrl
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: saved
          schema:
            type: string
      summary: Update git repository URL
      tags:
      - config
  /api/config/section-edit-subheaders:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: Whether section editing should include subheaders
        in: formData
        name: sectionEditIncludeSubheaders
        required: true
        type: boolean
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Update section edit include subheaders setting
      tags:
      - config
  /api/cronjob:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Manually triggers the cronjob execution (file processing and search
        indexing)
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: '{"status":"ok","message":"cronjob executed successfully"}'
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      summary: Run cronjob
      tags:
      - cronjob
  /api/dashboards:
    get:
      description: Get list of all dashboards for current user
      parameters:
      - description: Show shortened dashboard names (3 chars max)
        in: query
        name: short
        type: boolean
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/dashboard.Dashboard'
            type: array
      summary: Get all dashboards
      tags:
      - dashboards
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Create a new dashboard with optional widgets
      parameters:
      - description: Dashboard name
        in: formData
        name: name
        required: true
        type: string
      - description: Dashboard layout (oneColumn, twoColumns, threeColumns, fourColumns)
        in: formData
        name: layout
        required: true
        type: string
      - description: Widget type (filter, filterForm, fileContent, static, tags, collections,
          folders)
        in: formData
        name: widgets[0][type]
        type: string
      - description: Widget title
        in: formData
        name: widgets[0][title]
        type: string
      - description: Widget X position
        in: formData
        name: widgets[0][position][x]
        type: integer
      - description: Widget Y position
        in: formData
        name: widgets[0][position][y]
        type: integer
      - description: Widget configuration JSON
        in: formData
        name: widgets[0][config]
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: dashboard created
          schema:
            type: string
      summary: Create new dashboard
      tags:
      - dashboards
  /api/dashboards/{id}:
    delete:
      description: Delete dashboard by ID
      parameters:
      - description: Dashboard ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: dashboard deleted
          schema:
            type: string
      summary: Delete dashboard
      tags:
      - dashboards
    get:
      description: Get dashboard by ID
      parameters:
      - description: Dashboard ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dashboard.Dashboard'
      summary: Get specific dashboard
      tags:
      - dashboards
    patch:
      consumes:
      - application/x-www-form-urlencoded
      description: Update existing dashboard
      parameters:
      - description: Dashboard ID
        in: path
        name: id
        required: true
        type: string
      - description: Dashboard name
        in: formData
        name: name
        type: string
      - description: Dashboard layout (oneColumn, twoColumns, threeColumns, fourColumns)
        in: formData
        name: layout
        type: string
      - description: Widget type
        in: formData
        name: widgets[0][type]
        type: string
      - description: Widget title
        in: formData
        name: widgets[0][title]
        type: string
      - description: Widget X position
        in: formData
        name: widgets[0][position][x]
        type: integer
      - description: Widget Y position
        in: formData
        name: widgets[0][position][y]
        type: integer
      - description: Widget configuration JSON
        in: formData
        name: widgets[0][config]
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dashboard.Dashboard'
      summary: Update dashboard
      tags:
      - dashboards
  /api/dashboards/{id}/rename:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: dashboard id
        in: path
        name: id
        required: true
        type: string
      - description: new dashboard name
        in: formData
        name: name
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: dashboard renamed
          schema:
            type: string
      summary: Rename dashboard
      tags:
      - dashboards
  /api/dashboards/form:
    get:
      description: Get dashboard form for create or edit
      parameters:
      - description: Dashboard ID for edit mode
        in: query
        name: id
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: dashboard form html
          schema:
            type: string
      summary: Get dashboard form
      tags:
      - dashboards
  /api/dashboards/widget-config:
    get:
      consumes:
      - application/x-www-form-urlencoded
      description: Get configuration form for specific widget type
      parameters:
      - description: Widget index
        in: query
        name: index
        required: true
        type: string
      - description: Widget type
        in: query
        name: widgets[X][type]
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: widget config html
          schema:
            type: string
      summary: Get widget configuration form
      tags:
      - dashboards
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Get configuration form for specific widget type
      parameters:
      - description: Widget index
        in: query
        name: index
        required: true
        type: string
      - description: Widget type
        in: query
        name: widgets[X][type]
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: widget config html
          schema:
            type: string
      summary: Get widget configuration form
      tags:
      - dashboards
  /api/dashboards/widget-form:
    post:
      description: Get empty widget form for adding new widget
      produces:
      - text/html
      responses:
        "200":
          description: widget form html
          schema:
            type: string
      summary: Get widget form
      tags:
      - dashboards
  /api/dashboards/widget/{widgetId}:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Render a specific widget by ID from a dashboard
      parameters:
      - description: Dashboard ID
        in: formData
        name: dashboardId
        required: true
        type: string
      - description: Widget ID
        in: path
        name: widgetId
        required: true
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: rendered widget html
          schema:
            type: string
        "400":
          description: missing parameters
          schema:
            type: string
        "404":
          description: widget not found
          schema:
            type: string
        "500":
          description: failed to render widget
          schema:
            type: string
      summary: Render dashboard widget
      tags:
      - widgets
  /api/editor:
    get:
      description: Returns the appropriate editor based on file metadata or filetype
        parameter
      parameters:
      - description: file path (optional for new files)
        in: query
        name: filepath
        type: string
      - description: file type (optional for new files)
        in: query
        name: filetype
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get appropriate editor for file
      tags:
      - editor
  /api/editor/filtereditor:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Saves a filter file (redirects to existing filter save endpoint)
      produces:
      - text/html
      responses: {}
      summary: Save filter editor
      tags:
      - editor
  /api/editor/indexeditor:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Saves an index/MOC file
      parameters:
      - description: file path
        in: formData
        name: filepath
        required: true
        type: string
      - description: entry type
        in: formData
        name: entries[][type]
        type: string
      - description: entry value
        in: formData
        name: entries[][value]
        type: string
      produces:
      - text/html
      responses: {}
      summary: Save index editor
      tags:
      - editor
  /api/editor/indexeditor/add-entry:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Adds a new entry to the index editor
      parameters:
      - description: entry type (separator, file, title)
        in: formData
        name: type
        required: true
        type: string
      produces:
      - text/html
      responses: {}
      summary: Add index entry
      tags:
      - editor
  /api/editor/listeditor:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Saves a list file for todo and journaling file types
      parameters:
      - description: file path
        in: formData
        name: filepath
        required: true
        type: string
      - description: list content as json
        in: formData
        name: content
        required: true
        type: string
      produces:
      - text/html
      responses: {}
      summary: Save list editor
      tags:
      - editor
  /api/editor/markdown-form:
    get:
      description: Returns a markdown editor form for creating or editing files
      parameters:
      - description: file path (optional for new files)
        in: query
        name: filepath
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get markdown editor form HTML
      tags:
      - editor
  /api/editor/tableeditor:
    get:
      description: Returns table editor component with Handsontable
      parameters:
      - description: file path
        in: query
        name: filepath
        required: true
        type: string
      - description: table index (default 0)
        in: query
        name: tableIndex
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get table editor form
      tags:
      - editor
    post:
      consumes:
      - multipart/form-data
      description: Saves table data back to markdown file
      parameters:
      - description: file path
        in: formData
        name: filepath
        required: true
        type: string
      - description: table headers as JSON array
        in: formData
        name: headers
        required: true
        type: string
      - description: table rows as JSON array
        in: formData
        name: rows
        required: true
        type: string
      - description: table index in document
        in: formData
        name: tableIndex
        required: true
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: success message
          schema:
            type: string
        "400":
          description: invalid request
          schema:
            type: string
        "500":
          description: server error
          schema:
            type: string
      summary: Save table data
      tags:
      - editor
  /api/editor/textarea:
    get:
      description: Returns a simple textarea editor component for editing file content
      parameters:
      - description: file path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get textarea editor component
      tags:
      - editor
  /api/files/browse:
    get:
      parameters:
      - description: Metadata field name
        in: query
        name: metadata
        required: true
        type: string
      - description: Metadata field value
        in: query
        name: value
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/files.File'
            type: array
      summary: Browse files by single metadata field
      tags:
      - files
  /api/files/content/{filepath}:
    get:
      parameters:
      - description: File path
        in: path
        name: filepath
        required: true
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get file content as html
      tags:
      - files
  /api/files/delete/{filepath}:
    delete:
      consumes:
      - application/x-www-form-urlencoded
      description: Deletes a file and its metadata
      parameters:
      - description: File path to delete
        in: path
        name: filepath
        required: true
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: success message
          schema:
            type: string
      summary: Delete a file
      tags:
      - files
  /api/files/export/markdown:
    get:
      consumes:
      - application/x-www-form-urlencoded
      description: Export dokuwiki file to markdown format
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - text/markdown
      responses:
        "200":
          description: markdown file
          schema:
            type: file
        "400":
          description: invalid request
          schema:
            type: string
        "500":
          description: export failed
          schema:
            type: string
      summary: Export file to markdown
      tags:
      - files
  /api/files/export/markdown-converted:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Export all files from data directory as a zip archive, converting
        dokuwiki files to markdown
      produces:
      - application/zip
      responses:
        "200":
          description: zip archive
          schema:
            type: file
        "500":
          description: export failed
          schema:
            type: string
      summary: Export all files with dokuwiki to markdown conversion
      tags:
      - files
  /api/files/export/zip:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Export all files from data directory as a zip archive
      produces:
      - application/zip
      responses:
        "200":
          description: zip archive
          schema:
            type: file
        "500":
          description: export failed
          schema:
            type: string
      summary: Export all files as zip
      tags:
      - files
  /api/files/folder:
    get:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: folder path (root if empty)
        in: query
        name: path
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get folder structure
      tags:
      - files
  /api/files/folder-suggestions:
    get:
      description: Returns folder path suggestions for file creation form
      produces:
      - text/html
      responses:
        "200":
          description: datalist options html
          schema:
            type: string
      summary: Get folder path suggestions for datalist
      tags:
      - files
  /api/files/form:
    get:
      parameters:
      - description: File path (optional for new files)
        in: query
        name: filepath
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get file form HTML
      tags:
      - files
  /api/files/header:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get file header with link and breadcrumb
      tags:
      - files
  /api/files/list:
    get:
      parameters:
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get all files
      tags:
      - files
  /api/files/metadata-form:
    get:
      parameters:
      - description: File path (optional for new files)
        in: query
        name: filepath
        type: string
      - description: Default file type (optional for new files)
        in: query
        name: filetype
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get metadata form HTML
      tags:
      - files
  /api/files/metadata/form:
    get:
      parameters:
      - description: File path (optional for new files)
        in: query
        name: filepath
        type: string
      produces:
      - text/html
      responses: {}
      summary: Get metadata form HTML for file editing
      tags:
      - files
  /api/files/raw:
    get:
      description: Returns unprocessed file content for editing
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/plain
      responses:
        "200":
          description: raw content
          schema:
            type: string
      summary: Get raw file content
      tags:
      - files
  /api/files/rename/{filepath}:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Renames a file and updates all links pointing to it
      parameters:
      - description: Current file path
        in: path
        name: filepath
        required: true
        type: string
      - description: New file name
        in: formData
        name: name
        required: true
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: success message
          schema:
            type: string
      summary: Rename a file
      tags:
      - files
  /api/files/save:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: File content
        in: formData
        name: content
        required: true
        type: string
      produces:
      - text/html
      responses: {}
      summary: Save file content
      tags:
      - files
  /api/files/section/save:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Saves section content back to markdown file
      parameters:
      - description: file path
        in: formData
        name: filepath
        required: true
        type: string
      - description: section id
        in: formData
        name: sectionid
        required: true
        type: string
      - description: section content
        in: formData
        name: content
        required: true
        type: string
      produces:
      - text/html
      responses: {}
      summary: Save section content
      tags:
      - editor
  /api/files/versions/{filepath}:
    get:
      description: List all versions of a file or get specific version content
      parameters:
      - description: File path
        in: path
        name: filepath
        required: true
        type: string
      - description: Specific commit (current, previous, or commit hash)
        in: query
        name: commit
        type: string
      - description: 'Output format: full, sidebar, compact, content (default: full)'
        in: query
        name: output
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: File versions or specific version content
      summary: Get file versions
      tags:
      - files
  /api/files/versions/diff/{filepath}:
    get:
      description: Compare two versions of a file
      parameters:
      - description: File path
        in: path
        name: filepath
        required: true
        type: string
      - description: From commit hash or 'current'
        in: query
        name: from
        required: true
        type: string
      - description: To commit hash or 'current'
        in: query
        name: to
        required: true
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: File diff content
      summary: Get file version diff
      tags:
      - files
  /api/files/versions/restore/{filepath}:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Restore a file to a specific version
      parameters:
      - description: File path
        in: path
        name: filepath
        required: true
        type: string
      - description: Commit hash to restore to
        in: formData
        name: commit
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: File restored successfully
      summary: Restore file version
      tags:
      - files
  /api/filter:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Filter files based on metadata criteria with configurable logic
        and display
      parameters:
      - description: Metadata field names
        in: formData
        name: metadata[]
        type: array
      - description: Filter operators (equals, contains, greater, less, in)
        in: formData
        name: operator[]
        type: array
      - description: Filter values
        in: formData
        name: value[]
        type: array
      - description: Filter actions (include, exclude)
        in: formData
        name: action[]
        type: array
      - default: and
        description: Logic operator (and/or)
        in: formData
        name: logic
        type: string
      - default: list
        description: Display type (list, cards, dropdown, table)
        in: formData
        name: display
        type: string
      - default: 50
        description: Maximum number of results
        in: formData
        name: limit
        type: integer
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/filter.Result'
      summary: Filter files by metadata
      tags:
      - filter
  /api/filter/add-criteria:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Add new filter criteria row for filter forms
      produces:
      - text/html
      responses:
        "200":
          description: filter criteria row html
          schema:
            type: string
      summary: Add filter criteria
      tags:
      - filter
  /api/filter/criteria-row:
    get:
      consumes:
      - application/x-www-form-urlencoded
      description: Get HTML for a new filter criteria row
      parameters:
      - description: Row index
        in: formData
        name: row_index
        type: integer
      produces:
      - text/html
      responses:
        "200":
          description: filter criteria row html
          schema:
            type: string
      summary: Get filter criteria row
      tags:
      - filter
  /api/filter/form:
    get:
      consumes:
      - application/x-www-form-urlencoded
      description: Get HTML for complete filter form
      parameters:
      - description: Filter configuration JSON
        in: formData
        name: config
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: filter form html
          schema:
            type: string
      summary: Get filter form
      tags:
      - filter
  /api/filter/save:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Save filter configuration as JSON file with .filter extension
      parameters:
      - description: Filter file path (without extension, optional for new files)
        in: formData
        name: filepath
        type: string
      - description: Metadata field names
        in: formData
        name: metadata[]
        type: array
      - description: Filter operators (equals, contains, greater, less, in)
        in: formData
        name: operator[]
        type: array
      - description: Filter values
        in: formData
        name: value[]
        type: array
      - description: Filter actions (include, exclude)
        in: formData
        name: action[]
        type: array
      - default: and
        description: Logic operator (and/or)
        in: formData
        name: logic
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: success message
          schema:
            type: string
      summary: Save filter configuration
      tags:
      - filter
  /api/filter/value-input:
    get:
      consumes:
      - application/x-www-form-urlencoded
      description: Get HTML for filter value input based on metadata field type
      parameters:
      - description: Metadata field name
        in: formData
        name: metadata
        required: true
        type: string
      - description: Row index
        in: formData
        name: row_index
        required: true
        type: integer
      - description: Current value
        in: formData
        name: value
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: filter value input html
          schema:
            type: string
      summary: Get filter value input
      tags:
      - filter
  /api/git/latestchanges:
    get:
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get recently changed files
      tags:
      - git
  /api/health:
    get:
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Health check
      tags:
      - health
  /api/links/ancestors:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get ancestor links for a file
      tags:
      - links
  /api/links/kids:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get kids links for a file
      tags:
      - links
  /api/links/linkstohere:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get links to here for a file
      tags:
      - links
  /api/links/parents:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get parent links for a file
      tags:
      - links
  /api/links/used:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Get used links for a file
      tags:
      - links
  /api/media/{mediapath}:
    delete:
      description: Deletes a media file and its metadata
      parameters:
      - description: Media file path to delete
        in: path
        name: mediapath
        required: true
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: success message
          schema:
            type: string
        "400":
          description: missing media path
          schema:
            type: string
        "404":
          description: media file not found
          schema:
            type: string
        "500":
          description: internal error
          schema:
            type: string
      summary: Delete media file
      tags:
      - media
  /api/media/list:
    get:
      description: Get list of all media files with metadata
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: List of media files
          schema:
            additionalProperties: true
            type: object
        "500":
          description: internal error
          schema:
            type: string
      summary: Get all media files
      tags:
      - media
  /api/media/preview:
    get:
      description: Returns HTML for a media preview image
      parameters:
      - description: media file path
        in: query
        name: path
        required: true
        type: string
      - description: preview size in pixels (default from settings)
        in: query
        name: size
        type: integer
      produces:
      - text/html
      responses:
        "200":
          description: HTML preview element
          schema:
            type: string
        "400":
          description: invalid request
          schema:
            type: string
        "404":
          description: media file not found
          schema:
            type: string
      summary: Get media preview HTML
      tags:
      - media
  /api/media/upload:
    post:
      consumes:
      - multipart/form-data
      description: Upload a media file with context path for directory mirroring
      parameters:
      - description: Media file to upload
        in: formData
        name: file
        required: true
        type: file
      - description: Current file being edited (for directory structure)
        in: formData
        name: context_path
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: Upload success with file path
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: invalid request
          schema:
            type: string
        "413":
          description: file too large
          schema:
            type: string
        "415":
          description: unsupported file type
          schema:
            type: string
        "500":
          description: upload failed
          schema:
            type: string
      summary: Upload media file
      tags:
      - media
  /api/metadata:
    get:
      description: Get metadata for a file using filepath query parameter. Supports
        both media/ and docs/ paths.
      parameters:
      - description: File path (with or without media/docs prefix)
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/files.Metadata'
        "400":
          description: missing filepath parameter
          schema:
            type: string
        "404":
          description: metadata not found
          schema:
            type: string
        "500":
          description: failed to get metadata
          schema:
            type: string
      summary: Get metadata for a single file
      tags:
      - metadata
    post:
      consumes:
      - application/json
      description: Set metadata for a file using JSON payload
      parameters:
      - description: Metadata object
        in: body
        name: metadata
        required: true
        schema:
          $ref: '#/definitions/files.Metadata'
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: metadata saved
          schema:
            type: string
        "400":
          description: invalid json or missing path
          schema:
            type: string
        "500":
          description: failed to save metadata
          schema:
            type: string
      summary: Set metadata for a single file
      tags:
      - metadata
  /api/metadata/collection:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file collection
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Collection name
        in: formData
        name: collection
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file collection
      tags:
      - metadata
  /api/metadata/collections:
    get:
      description: Get all collections with counts, or collection for a specific file
        if filepath is provided
      parameters:
      - description: File path (optional - if provided, returns collection for that
          specific file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/files.CollectionCount'
      summary: Get all collections or collection for a specific file
      tags:
      - metadata
  /api/metadata/createdat:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file creation date
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Creation date (YYYY-MM-DD HH:MM:SS)
        in: formData
        name: createdat
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file creation date
      tags:
      - metadata
  /api/metadata/export:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Export all metadata as JSON or CSV file
      parameters:
      - default: json
        description: Export format (json or csv)
        in: formData
        name: format
        type: string
      produces:
      - application/json
      - text/csv
      responses:
        "200":
          description: exported metadata file
          schema:
            type: file
        "500":
          description: failed to export metadata
          schema:
            type: string
      summary: Export all metadata
      tags:
      - metadata
  /api/metadata/file/collection:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get collection for a specific file
      tags:
      - metadata
  /api/metadata/file/folders:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            items:
              type: string
            type: array
      summary: Get folders for a specific file
      tags:
      - metadata
  /api/metadata/file/tags:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            items:
              type: string
            type: array
      summary: Get tags for a specific file
      tags:
      - metadata
  /api/metadata/filetype:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file type
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: File type (fleeting, literature, permanent, moc, todo)
        in: formData
        name: filetype
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file type
      tags:
      - metadata
  /api/metadata/filetypes:
    get:
      parameters:
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/files.FiletypeCount'
      summary: Get all available filetypes
      tags:
      - metadata
  /api/metadata/folders:
    get:
      description: Get all folders with counts, or folders for a specific file if
        filepath is provided
      parameters:
      - description: File path (optional - if provided, returns folders for that specific
          file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/files.FolderCount'
      summary: Get all folders or folders for a specific file
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated folder list
        in: formData
        name: folders
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file folders
      tags:
      - metadata
  /api/metadata/lastedited:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file last edited date
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Last edited date (YYYY-MM-DD HH:MM:SS)
        in: formData
        name: lastedited
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file last edited date
      tags:
      - metadata
  /api/metadata/para/archive:
    get:
      description: Get all PARA archive with counts, or archive for a specific file
        if filepath is provided
      parameters:
      - description: File path (optional - if provided, returns archive for that specific
          file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for datalist)
        enum:
        - options
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/files.PARAArchiveCount'
      summary: Get all PARA archive or archive for a specific file
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated archive list
        in: formData
        name: archive
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set PARA archive
      tags:
      - metadata
  /api/metadata/para/areas:
    get:
      description: Get all PARA areas with counts, or areas for a specific file if
        filepath is provided
      parameters:
      - description: File path (optional - if provided, returns areas for that specific
          file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for datalist)
        enum:
        - options
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/files.PARAAreaCount'
      summary: Get all PARA areas or areas for a specific file
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated area list
        in: formData
        name: areas
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set PARA areas
      tags:
      - metadata
  /api/metadata/para/projects:
    get:
      description: Get all PARA projects with counts, or projects for a specific file
        if filepath is provided
      parameters:
      - description: File path (optional - if provided, returns projects for that
          specific file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for datalist)
        enum:
        - options
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/files.PARAProjectCount'
      summary: Get all PARA projects or projects for a specific file
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated project list
        in: formData
        name: projects
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set PARA projects
      tags:
      - metadata
  /api/metadata/para/resources:
    get:
      description: Get all PARA resources with counts, or resources for a specific
        file if filepath is provided
      parameters:
      - description: File path (optional - if provided, returns resources for that
          specific file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for datalist)
        enum:
        - options
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/files.PARAResourceCount'
      summary: Get all PARA resources or resources for a specific file
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated resource list
        in: formData
        name: resources
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set PARA resources
      tags:
      - metadata
  /api/metadata/parents:
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated parent file paths
        in: formData
        name: parents
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file parents
      tags:
      - metadata
  /api/metadata/path:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file path
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: Current file path
        in: formData
        name: filepath
        required: true
        type: string
      - description: New file path
        in: formData
        name: newpath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file path
      tags:
      - metadata
  /api/metadata/priorities:
    get:
      parameters:
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/files.PriorityCount'
      summary: Get all available priorities
      tags:
      - metadata
  /api/metadata/priority:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file priority
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Priority (low, medium, high)
        in: formData
        name: priority
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file priority
      tags:
      - metadata
  /api/metadata/rebuild:
    post:
      description: Creates metadata for all files that don't have metadata yet
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: metadata initialized
          schema:
            type: string
        "500":
          description: failed to initialize metadata
          schema:
            type: string
      summary: Initialize/Rebuild metadata for all files
      tags:
      - metadata
  /api/metadata/status:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file status
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Status (draft, published, archived)
        in: formData
        name: status
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file status
      tags:
      - metadata
  /api/metadata/statuses:
    get:
      parameters:
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/files.StatusCount'
      summary: Get all available statuses
      tags:
      - metadata
  /api/metadata/tags:
    get:
      description: Get all tags with counts, or tags for a specific file if filepath
        is provided
      parameters:
      - description: File path (optional - if provided, returns tags for that specific
          file)
        in: query
        name: filepath
        type: string
      - description: Response format (options for HTML select options)
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/files.TagCount'
      summary: Get all tags or tags for a specific file
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Comma-separated tag list
        in: formData
        name: tags
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file tags
      tags:
      - metadata
  /api/metadata/targetdate:
    get:
      parameters:
      - description: File path
        in: query
        name: filepath
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Get file target date
      tags:
      - metadata
    post:
      consumes:
      - application/x-www-form-urlencoded
      parameters:
      - description: File path
        in: formData
        name: filepath
        required: true
        type: string
      - description: Target date (YYYY-MM-DD, empty to clear)
        in: formData
        name: targetdate
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Set file target date
      tags:
      - metadata
  /api/search:
    get:
      parameters:
      - description: Search query
        in: query
        name: q
        required: true
        type: string
      - description: 'Output format: dropdown, list, cards, json'
        enum:
        - dropdown
        - list
        - cards
        - json
        in: query
        name: format
        type: string
      produces:
      - application/json
      - text/html
      responses: {}
      summary: Search files
      tags:
      - search
  /api/system/restart:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Restarts the application (requires process manager like systemd
        or docker)
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: restarting
          schema:
            type: string
      summary: Restart application
      tags:
      - system
  /api/testdata/clean:
    post:
      description: Removes all test data files and metadata
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: '{"status":"ok","message":"test data cleaned"}'
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      summary: Clean test data
      tags:
      - testdata
  /api/testdata/filtertest:
    post:
      description: Executes comprehensive filter test scenarios with 12 test metadata
        objects
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: filter test results
          schema:
            $ref: '#/definitions/testdata.FilterTestResults'
        "500":
          description: Internal server error
          schema:
            type: string
      summary: Run filter tests
      tags:
      - testdata
  /api/testdata/filtertest/testdata:
    get:
      description: Returns filter test metadata in table format showing all 12 test
        objects
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: filter test metadata table
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      summary: Get filter test metadata table
      tags:
      - testdata
  /api/testdata/setup:
    post:
      description: Creates test files, git operations, and metadata for testing
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: '{"status":"ok","message":"test data setup completed"}'
          schema:
            type: string
        "500":
          description: Internal server error
          schema:
            type: string
      summary: Setup test data
      tags:
      - testdata
  /api/themes:
    get:
      description: Get current theme and available themes
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: '{"current":"themename","available":["theme1","theme2"]}'
          schema:
            type: string
      summary: Get themes
      tags:
      - themes
  /api/themes/:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Set new theme via form parameter
      parameters:
      - description: Theme name to set
        in: formData
        name: theme
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "303":
          description: Redirect to settings page
      summary: Set theme
      tags:
      - themes
  /api/themes/{themeName}/settings:
    get:
      description: Get all settings for a specific theme
      parameters:
      - description: Theme name
        in: path
        name: themeName
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: Theme settings object
          schema:
            type: object
      summary: Get theme settings
      tags:
      - themes
  /api/themes/{themeName}/settings/{settingKey}:
    put:
      consumes:
      - application/x-www-form-urlencoded
      description: Update a specific setting for a theme
      parameters:
      - description: Theme name
        in: path
        name: themeName
        required: true
        type: string
      - description: Setting key to update
        in: path
        name: settingKey
        required: true
        type: string
      - description: Setting value
        in: formData
        name: value
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: Setting updated successfully
      summary: Update theme setting
      tags:
      - themes
  /api/themes/settings:
    get:
      description: Get all theme settings as HTML form elements
      produces:
      - text/html
      responses:
        "200":
          description: HTML form elements
          schema:
            type: string
      summary: Get theme settings form
      tags:
      - themes
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Update a specific setting for the current theme
      parameters:
      - description: Setting key
        in: formData
        name: key
        required: true
        type: string
      - description: Setting value
        in: formData
        name: value
        required: true
        type: string
      produces:
      - application/json
      - text/html
      responses:
        "200":
          description: Setting updated successfully
      summary: Update theme setting
      tags:
      - themes
swagger: "2.0"
